{% extends 'mentor_base.html' %}
{% load static %}
{% block title %}Children Details{% endblock %}

{% block extra_css %}
<link rel="stylesheet" type="text/css" href="{% static 'css/mentor_children_details.css' %}">
{% endblock %}

{% block content %}
<div class="container">
    <h1>Children Details</h1>
    <div class="table-responsive">
        <table class="table">
            <thead>
                <tr>
                    <th>Child Name</th>
                    <th>Phone</th>
                    <th>TeenCoins</th>
                    <th>Completed Tasks</th>
                </tr>
            </thead>
            <tbody>
                {% for child in children %}
                    <tr>
                        <td>{{ child.user.username }}</td>
                        <td>{{ child.user.phone }}</td> 
                        <td>{{ child.points }}</td>
                        <td><button class="view-tasks-btn" onclick="toggleTasks({{ child.id }})">View Tasks</button></td>
                    </tr>
                    <tr id="tasks-{{ child.id }}" class="hidden">
                        <td colspan="5">
                            <ul>
                                {% for task in child.completed_tasks.all %}
                                    <li>{{ task.title }} - Completed on: {{ task.completed_date|date:"F j, Y" }} - TeenCoins: {{ task.points }}</li>
                                {% endfor %}
                            </ul>
                        </td>
                    </tr>
                {% endfor %}
                {% if children|length == 0 %}
                <tr>
                    <td colspan="4" class="text-center">No Children Found</td>
                </tr>
                {% endif %}
            </tbody>
        </table>
    </div>
    <a href="{% url 'mentor_home' %}" class="button">Back to Home</a>
</div>
{% endblock %}

{% block extra_js %}
<script src="{% static 'js/mentor_children_details.js' %}"></script>
{% endblock %}
