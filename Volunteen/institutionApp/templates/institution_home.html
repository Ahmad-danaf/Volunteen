{% extends 'institution_base.html' %}
{% load static %}

{% block title %}××¡×š ×”×‘×™×ª - Institution | Volunteen{% endblock title %}


{% block content %}
<div class="container">
  
  <h2>ğŸ« ×“×£ ×”×‘×™×ª</h2>
  
  <div class="card">
    <h4>ğŸ“Š ×ª×§×¦×™×‘ ×˜×™× ×§××•×™× ×¡</h4>
    <p><strong>×¡×š ×”×›×œ ×˜×™× ×§×•×™× ×¡:</strong> <span id="totalTeencoins">{{ institution.total_teencoins }}</span></p>
    <p><strong>×˜×™× ×§×•×™× ×¡ ×–××™× ×™×:</strong> <span id="availableTeencoins">{{ institution.available_teencoins }}</span></p>
  </div>

  <div class="row">
    <div class="col-md-6 mb-3">
      <a href="{% url 'institutionApp:transfer_teencoins' %}" class="btn btn-primary">
        ğŸ’°  ×”×¢×‘×¨×ª ×˜×™× ×§×•××™× ×¡ ×œ×× ×˜×•×¨
      </a>
    </div>
    <div class="col-md-6 mb-3">
      <a href="{% url 'institutionApp:transfer_between_mentors' %}" class="btn btn-warning">
        ğŸ”„ ×”×¢×‘×¨×” ×‘×™×Ÿ ×× ×˜×•×¨×™×
      </a>
    </div>
  </div>

  <div class="row mt-3">
    <div class="col-md-6 mb-3">
      <a href="{% url 'institutionApp:transfer_history' %}" class="btn btn-info">
        ğŸ“œ ×”×™×¡×˜×•×¨×™×™×ª ×”×¢×‘×¨×•×ª
      </a>
    </div>
    <div class="col-md-6 mb-3">
      <a href="{% url 'institutionApp:mentor_management' %}" class="btn btn-secondary">
        ğŸ‘¨â€ğŸ« × ×™×”×•×œ ×× ×˜×•×¨×™×
      </a>
    </div>
  </div>

</div>
{% endblock content %}

{% block extra_js %}
<script>
  function fetchBalances() {
    fetch("{% url 'institutionApp:institution_balances' %}")
      .then(response => {
        if (!response.ok) {
          throw new Error("×©×’×™××” ×‘×¨×©×ª ××• ×‘×ª×©×•×‘×” ××”×©×¨×ª");
        }
        return response.json();
      })
      .then(data => {
        document.getElementById("totalTeencoins").innerText = data.total_teencoins;
        document.getElementById("availableTeencoins").innerText = data.available_teencoins;
      })
      .catch(error => console.error("Error fetching balances:", error));
  }

  document.addEventListener("DOMContentLoaded", fetchBalances);
</script>
{% endblock extra_js %}
