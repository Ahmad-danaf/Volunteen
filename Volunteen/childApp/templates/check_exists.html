{% extends 'child_base.html' %}

{% block content %}
<style>
    body {
        font-family: 'Segoe UI', sans-serif;
        background: linear-gradient(to bottom right, #ffffff, #f0f0f0);
        margin: 0;
        padding: 0;
    }

    .container {
        max-width: 600px;
        margin: 0 auto;
        padding: 40px 20px;
        text-align: center;
        animation: fadeIn 0.6s ease-in-out;
    }

    h1 {
        font-size: 26px;
        color: #e53935;
        margin-bottom: 15px;
        animation: slideDown 0.5s ease-out;
    }

    p {
        font-size: 18px;
        color: #333;
        margin-bottom: 25px;
        line-height: 1.5;
        animation: slideUp 0.5s ease-out;
    }

    .warning-box {
        background-color: #ffe5e5;
        color: #b71c1c;
        border: 2px solid #e53935;
        padding: 20px;
        border-radius: 14px;
        font-weight: bold;
        margin-bottom: 30px;
        box-shadow: 0 0 12px rgba(229, 57, 53, 0.2);
        animation: pulse 2s infinite alternate;
    }

    .btn {
        display: inline-block;
        padding: 14px 26px;
        margin: 10px;
        font-size: 16px;
        border: none;
        border-radius: 10px;
        cursor: pointer;
        text-decoration: none;
        transition: background-color 0.3s ease;
    }

    .btn-primary {
        background-color: #e53935;
        color: white;
    }

    .btn-primary:hover {
        background-color: #c62828;
    }

    .btn-secondary {
        background-color: #1e88e5;
        color: white;
    }

    .btn-secondary:hover {
        background-color: #1565c0;
    }

    .btn-late {
        animation: shake 0.3s ease-in-out;
    }

    .info-message {
        font-size: 16px;
        margin-top: 25px;
        animation: fadeIn 0.5s ease-in;
    }

    @keyframes fadeIn {
        from { opacity: 0; }
        to { opacity: 1; }
    }

    @keyframes slideDown {
        from { transform: translateY(-20px); opacity: 0; }
        to { transform: translateY(0); opacity: 1; }
    }

    @keyframes slideUp {
        from { transform: translateY(20px); opacity: 0; }
        to { transform: translateY(0); opacity: 1; }
    }

    @keyframes pulse {
        0% { box-shadow: 0 0 10px rgba(229, 57, 53, 0.15); }
        100% { box-shadow: 0 0 20px rgba(229, 57, 53, 0.4); }
    }

    @keyframes shake {
        0% { transform: translateX(0); }
        25% { transform: translateX(-3px); }
        50% { transform: translateX(3px); }
        75% { transform: translateX(-2px); }
        100% { transform: translateX(0); }
    }
</style>

<div class="container">
    <h1>{{ action_label }} כבר בוצע</h1>

    <p>כבר ביצעת {{ action_label }} למשימה:  
        <strong>{{ task.title }}</strong>
    </p>

    <div class="warning-box">
        <strong>שימו לב! ⏰</strong><br>
        אם תעלה תמונה חדשה עכשיו –<br>
        זמן {{ action_label }} יתעדכן לשעה הנוכחית<br>
        {% if is_late_now %}
            וזה עלול להיחשב כאיחור!
        {% endif %}
    </div>

    {% if is_late_now %}
        <a href="{% url action_url task.id %}?replace_image=true"
           class="btn btn-primary btn-late"
           onclick="return confirm('שימו לב! זמן {{ action_label }} יתעדכן לשעה הנוכחית וזה עלול להיחשב כאיחור. להמשיך?')">
            כן, להעלות תמונה חדשה
        </a>
    {% else %}
        <a href="{% url action_url task.id %}?replace_image=true"
           class="btn btn-primary"
           onclick="return confirm('האם אתה בטוח שברצונך להעלות תמונה חדשה? זמן {{ action_label }} יתעדכן לשעה הנוכחית.')">
            כן, להעלות תמונה חדשה
        </a>
    {% endif %}

    <a href="{% url 'childApp:task_check_in_out' %}" class="btn btn-secondary">
        חזרה לרשימת המשימות
    </a>

    {% if is_late_now %}
        <p class="info-message" style="color: #b71c1c;">
            שים לב: אם תבצע עכשיו את {{ action_label }}, זה עלול להיחשב כאיחור.
        </p>
    {% else %}
        <p class="info-message" style="color: #388e3c;">
            הכל בסדר! רק נעדכן את השעה של {{ action_label }}.
        </p>
    {% endif %}
</div>

{% endblock %}
