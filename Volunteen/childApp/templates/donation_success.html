{% extends "child_base.html" %}
{% load static %}
{% load i18n %}
{% block title %}{% trans "×ª×¨×•××” ×”×•×©×œ××” ×‘×”×¦×œ×—×”" %}{% endblock %}
{% block extra_css %}
<style>
  .success-container {
    max-width: 100%;
    padding: 20px;
    border-radius: 15px;
    background-color: #fff;
    box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
    margin: 20px auto;
    text-align: center;
    animation: fadeInScale 0.8s ease-out forwards;
  }

  .success-title {
    color: #e67e22;
    margin-bottom: 25px;
    font-size: 1.8rem;
  }

  .success-message {
    color: #555;
    margin-bottom: 20px;
    font-size: 1.2rem;
    line-height: 1.6;
  }

  /* Improved Hadith Div */
  .hadith {
    background-color: #fff3e0;  /* very light orange background */
    border-left: 4px solid #e67e22;
    padding: 15px;
    margin: 20px auto;
    text-align: right;
    font-size: 1.1rem;
    line-height: 1.5;
    direction: rtl;
  }

  .donation-details {
    background-color: #fff3e0;
    padding: 15px;
    border-radius: 8px;
    margin: 20px 0;
    text-align: center;
  }

  .donation-amount {
    font-weight: bold;
    color: #e67e22;
    font-size: 1.4rem;
  }

  .donation-category {
    color: #e67e22;
    font-weight: bold;
  }

  .back-button {
    background-color: #e67e22;
    color: white;
    padding: 15px 25px;
    border: none;
    border-radius: 8px;
    font-size: 1.2rem;
    cursor: pointer;
    transition: background-color 0.3s;
    margin-top: 20px;
    display: inline-block;
    text-decoration: none;
  }

  .back-button:hover {
    background-color: #d35400;
  }

  /* Animation Container and Gift Box (Orange Theme Update) */
  .animation-container {
    width: 200px;
    height: 200px;
    margin: 20px auto;
    position: relative;
  }

  .gift-box {
    width: 100%;
    height: 100%;
    position: relative;
    transform-style: preserve-3d;
    animation: openBox 3s forwards;
  }

  .box-lid {
    width: 100%;
    height: 30px;
    background-color: #e67e22;
    position: absolute;
    top: 0;
    transform-origin: center top;
    border-radius: 5px 5px 0 0;
  }

  .box-container {
    width: 100%;
    height: 100px;
    background-color: #e67e22;
    position: absolute;
    top: 30px;
    border-radius: 0 0 5px 5px;
  }

  .box-ribbon {
    position: absolute;
    width: 30px;
    height: 130px;
    background-color: #f39c12;
    left: 50%;
    transform: translateX(-50%);
    z-index: 1;
  }

  .box-ribbon-horizontal {
    position: absolute;
    width: 100%;
    height: 30px;
    background-color: #f39c12;
    top: 50px;
    z-index: 2;
  }

  .donation-heart {
    position: absolute;
    top: 60px;
    left: 50%;
    transform: translateX(-50%);
    color: #e74c3c;
    font-size: 3em;
    opacity: 0;
    animation: floatHeart 2s 1.5s forwards;
  }

  @keyframes openBox {
    0% { transform: scale(1); }
    20% { transform: scale(1.05); }
    40% { transform: scale(1); }
    60% { transform: scale(1.03); }
    80% { transform: scale(1); }
    100% { transform: scale(1.1); }
  }

  @keyframes floatHeart {
    0% {
      opacity: 0;
      transform: translateX(-50%) translateY(0) scale(0.5);
    }
    50% {
      opacity: 1;
      transform: translateX(-50%) translateY(-30px) scale(1.5);
    }
    100% {
      opacity: 1;
      transform: translateX(-50%) translateY(-60px) scale(1);
    }
  }

  /* Entrance Animation for Success Container */
  @keyframes fadeInScale {
    0% {
      opacity: 0;
      transform: scale(0.95);
    }
    100% {
      opacity: 1;
      transform: scale(1);
    }
  }

  /* Quran Verse & Toggle Styles */
  .saying-container {
    margin-top: 20px;
    padding: 15px;
    background-color: #fff3e0;
    border-radius: 8px;
    text-align: center;
    font-size: 1.1rem;
    color: #555;
  }

  .verse-toggle {
    margin-top: 10px;
    padding: 8px 12px;
    background-color: #e67e22;
    color: white;
    border: none;
    border-radius: 4px;
    cursor: pointer;
    transition: background-color 0.3s;
  }

  .verse-toggle:hover {
    background-color: #d35400;
  }

  .verse-reference {
    font-size: 0.9em;
    color: #888;
    margin-left: 5px;
  }

  /* Mobile optimizations */
  @media (max-width: 768px) {
    .success-container {
      padding: 15px;
      margin: 10px;
    }
    .success-title {
      font-size: 1.5rem;
    }
    .animation-container {
      width: 150px;
      height: 150px;
    }
  }
</style>
{% endblock %}
{% block content %}
<div class="success-container">
  <h1 class="success-title">{% trans "×›×œ ×”×›×‘×•×“!" %}</h1>

  <!-- Hadith / Quran Verse Toggle Section -->
  <div class="saying-container">
    <p id="charity-hadith">
      {% blocktrans %}Ø¹Ù† Ø£Ø¨ÙŠ Ù‡Ø±ÙŠØ±Ø© Ø±Ø¶ÙŠ Ø§Ù„Ù„Ù‡ Ø¹Ù†Ù‡ Ù‚Ø§Ù„: Ù‚Ø§Ù„ Ø±Ø³ÙˆÙ„ Ø§Ù„Ù„Ù‡ ØµÙ„Ù‰ Ø§Ù„Ù„Ù‡ Ø¹Ù„ÙŠÙ‡ ÙˆØ³Ù„Ù…:<br>
      (Ù…Ø§ Ù†Ù‚ØµØª ØµØ¯Ù‚Ø©ÙŒ Ù…Ù† Ù…Ø§Ù„ÙØŒ ÙˆÙ…Ø§ Ø²Ø§Ø¯ Ø§Ù„Ù„Ù‡Ù Ø¹Ø¨Ø¯Ù‹Ø§ Ø¨Ø¹ÙÙˆÙ Ø¥Ù„Ø§ Ø¹Ø²Ù‘Ù‹Ø§ØŒ ÙˆÙ…Ø§ ØªÙˆØ§Ø¶Ø¹ Ø¹Ø¨Ø¯ÙŒ Ø¥Ù„Ø§ Ø±ÙØ¹Ù‡ Ø§Ù„Ù„Ù‡Ù) <br>
      Ø±ÙˆØ§Ù‡ Ù…Ø³Ù„Ù….{% endblocktrans %}
    </p>
    
    <button class="verse-toggle" id="toggle-hadith">{% trans "English" %}</button>
  </div>

  <div class="animation-container">
    <div class="gift-box">
      <div class="box-ribbon"></div>
      <div class="box-ribbon-horizontal"></div>
      <div class="box-lid"></div>
      <div class="box-container"></div>
      <div class="donation-heart">â¤ï¸</div>
    </div>
  </div>

  <p class="success-message hadith">
    {% blocktrans %}ÙˆØ¹Ù† Ø£Ø¨ÙŠ Ø³Ø¹ÙŠØ¯ Ø§Ù„Ø®Ø¯Ø±ÙŠ Ø±Ø¶ÙŠ Ø§Ù„Ù„Ù‡ Ø¹Ù†Ù‡ Ø¹Ù† Ø§Ù„Ù†Ø¨ÙŠ ØµÙ„Ù‰ Ø§Ù„Ù„Ù‡ Ø¹Ù„ÙŠÙ‡ ÙˆØ³Ù„Ù… Ù‚Ø§Ù„:<br>
    ( Ø£ÙŠÙ…Ø§ Ù…Ø³Ù„Ù… ÙƒØ³Ø§ Ù…Ø³Ù„Ù…Ù‹Ø§ Ø«ÙˆØ¨Ù‹Ø§ Ø¹Ù„Ù‰ Ø¹Ø±ÙŠØŒ ÙƒØ³Ø§Ù‡ Ø§Ù„Ù„Ù‡ Ù…Ù† Ø®Ø¶Ø± Ø§Ù„Ø¬Ù†Ø© ğŸ‘•ØŒ<br>
    ÙˆØ£ÙŠÙ…Ø§ Ù…Ø³Ù„Ù… Ø£Ø·Ø¹Ù… Ù…Ø³Ù„Ù…Ø§ Ø¹Ù„Ù‰ Ø¬ÙˆØ¹ØŒ Ø£Ø·Ø¹Ù…Ù‡ Ø§Ù„Ù„Ù‡ Ù…Ù† Ø«Ù…Ø§Ø± Ø§Ù„Ø¬Ù†Ø© ğŸ“ØŒ<br>
    ÙˆØ£ÙŠÙ…Ø§ Ù…Ø³Ù„Ù… Ø³Ù‚Ù‰ Ù…Ø³Ù„Ù…Ø§ Ø¹Ù„Ù‰ Ø¸Ù…Ø£ØŒ Ø³Ù‚Ø§Ù‡ Ø§Ù„Ù„Ù‡ Ù…Ù† Ø§Ù„Ø±Ø­ÙŠÙ‚ Ø§Ù„Ù…Ø®ØªÙˆÙ… ğŸ¶ )<br>
    Ø±ÙˆØ§Ù‡ Ø£Ø¨Ùˆ Ø¯Ø§ÙˆØ¯ ÙˆÙÙŠ Ø¥Ø³Ù†Ø§Ø¯Ù‡ Ù„ÙŠÙ†.{% endblocktrans %}
  </p>
  

  <div class="donation-details">
    {% trans "×ª×¨××ª" %} <span class="donation-amount">{{ amount }}</span> {% trans "×˜×™× ×§×•×™× ×¡" %}<br />
    {% trans "×œ×§×˜×’×•×¨×™×”:" %} <span class="donation-category">{{ category }}</span>
    <br>
     <span class="donation-description">{{ category_description }}</span>
  </div>

  <a href="{% url 'childApp:child_home' %}" class="back-button">{% trans "×—×–×¨×” ×œ×“×£ ×”×‘×™×ª" %}</a>
</div>

<script>
  document.addEventListener("DOMContentLoaded", function () {
    // Gift Box Lid Animation
    const boxLid = document.querySelector(".box-lid");
    setTimeout(() => {
      boxLid.style.transform = "rotateX(-110deg)";
      boxLid.style.transition = "transform 1s ease-in-out";
    }, 1000);

    // Quran Verse Toggle Code
    const verseText = document.getElementById("charity-hadith");
    const texts = {
      arabic: "{% trans 'Ù…Ø§ Ù†Ù‚ØµØª ØµØ¯Ù‚Ø©ÙŒ Ù…Ù† Ù…Ø§Ù„ÙØŒ ÙˆÙ…Ø§ Ø²Ø§Ø¯ Ø§Ù„Ù„Ù‡Ù Ø¹Ø¨Ø¯Ù‹Ø§ Ø¨Ø¹ÙÙˆÙ Ø¥Ù„Ø§ Ø¹Ø²Ù‘Ù‹Ø§ØŒ ÙˆÙ…Ø§ ØªÙˆØ§Ø¶Ø¹ Ø¹Ø¨Ø¯ÙŒ Ø¥Ù„Ø§ Ø±ÙØ¹Ù‡ Ø§Ù„Ù„Ù‡Ù' %}",
      english: "{% trans 'Charity does not decrease wealth. Allah increases the honor of one who forgives, and whoever humbles himself, Allah elevates him.' %}"
    };
    const T_BTN_ENGLISH = "{% trans 'English' %}";
    const T_BTN_ARABIC = "{% trans 'Ø¹Ø±Ø¨ÙŠ' %}";
    
    const toggleButton = document.getElementById("toggle-hadith");
    
    toggleButton.addEventListener("click", function () {
      if (verseText.innerHTML.includes("Ù…Ø§")) {
        verseText.innerHTML = texts.english;
        toggleButton.textContent = T_BTN_ARABIC;
      } else {
        verseText.innerHTML = texts.arabic;
        toggleButton.textContent = T_BTN_ENGLISH;
      }
    });
  });
</script>
{% endblock %}
